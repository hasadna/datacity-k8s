apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: cco-solr-reindex
spec:
  entrypoint: cco-solr-reindex
  arguments:
    parameters:
      - name: INSTANCE_NAME
      - name: ARGS
        default: "rebuild"
  templates:
    - name: cco-solr-reindex
      steps:
        - - name: cco-solr-reindex
            templateRef:
              name: cco-set-sysadmin
              template: cco-set-sysadmin
            arguments:
              parameters:
                - name: INSTANCE_NAME
                  value: {{ "{{workflow.parameters.INSTANCE_NAME}}" | quote }}
                - name: SYSADMIN_NAME
                  value: {{ "{{workflow.parameters.ARGS}}" | quote }}
                - name: NEW_SYSADMIN_PASSWORD
                  value: "-"
                - name: NEW_SYSADMIN_EMAIL
                  value: "-"
